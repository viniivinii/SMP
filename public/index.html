<!DOCTYPE html>
<html lang="pt-BR">

<head>
  <meta charset="UTF-8" />
  <link rel="icon" href="icon.png" type="image/png" />
  <title>Controle de MemÃ³rias RAM</title>
  <script src="https://cdn.jsdelivr.net/npm/jsbarcode@3.11.5/dist/JsBarcode.all.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.28/jspdf.plugin.autotable.min.js"></script>
  <link rel="stylesheet" href="style.css" />
</head>

<body>
  <div id="barraTopo">
    <img src="logo.png" alt="Logo" style="height: 60px; margin-bottom: 20px" />
    <div id="botoesTopo">
      <button class="btnTopo" id="btnEstoque" onclick="mostrarTela('telaEstoque')">ğŸ“¦ Estoque</button>
      <button class="btnTopo" id="btnExpedicao" onclick="mostrarTela('telaExpedicao')">ğŸšš ExpediÃ§Ã£o</button>      
      <button class="btnTopo" id="btnHistorico" onclick="mostrarTela('telaHistorico')">ğŸ“ Ver HistÃ³rico</button>
      <button class="btnTopo" id="btnNovoSKU"  onclick="mostrarTela('telaSkus')">ğŸ” Consultar SKU's</button>
    </div>
  </div>

  <div id="telaEstoque" style="display: block;">
    <div class="flex-row">
      <h1>ğŸ“¦ Tela Estoque</h1>
    </div>
    <div id="telaInicio">
      <div id="modalNovoPedido" class="modal hidden">
        <div class="modal-content">
          <h2>Novo Pedido</h2>
          <label for="pedidoInput">NÃºmero do Pedido:</label>
          <input type="text" id="pedidoInput" placeholder="Ex: 12345" />
          <p>Selecione o tipo do pedido:</p>
          <div class="tipo-buttons">
            <button onclick="selecionarTipo('memoria')" id="btnMemoria">MemÃ³ria</button>
            <button onclick="selecionarTipo('processador')" id="btnProcessador">Processador</button>
            <button onclick="selecionarTipo('ambos')" id="btnAmbos">Ambos</button>
          </div>
          <button id="confirmarPedido" onclick="confirmarNovoPedido()" disabled>Continuar</button>
          <button onclick="fecharModalNovoPedido()" style="background: #bdc3c7; margin-left: 10px">Cancelar</button>
        </div>
      </div>
      <div id="iniciarPedido">
        <h2>ğŸ“ª Iniciar SeparaÃ§Ã£o</h2>
        <button id="btnIniciar" style="margin-top: 10px; margin-right: 10px" onclick="abrirModalNovoPedido()">ğŸš€ Iniciar Pedido</button>
      </div>
      <div id="pedidosRecentes">
        <h2>ğŸ“¬â–ª Pedidos em SeparaÃ§Ã£o</h2>
        <div id="listaPedidosEstoque" class="cards-pedidos"></div>
      </div>
    </div>
  </div>

  <div id="telaExpedicao" style="display: none;">
    <div class="flex-row">
      <h1>ğŸ“¦ Tela ExpediÃ§Ã£o</h1>
    </div>
    <div id="listaPedidosExpedicao"></div>
  </div>

  <div id="telaPreparacao" style="display:none">
    <h2>PreparaÃ§Ã£o Pedido: <span id="tituloPedidoPreparacao"> - </span><span id="idPedidoPreparacao"></span></h2>
    <div id="containerPreparacao">
      <div class="flex-row">
        <div class="barra-progresso-container">
          <div class="barra-progresso" id="barraSeparados">
            <div class="progresso" id="progressoSeparados" style="width: 0%;">0%</div>
          </div>
          <div class="barra-progresso" id="barraPreparados">
            <div class="progresso" id="progressoPreparados" style="width: 0%;">0%</div>
          </div>
        </div>
      </div>
      <div class="cardsResumo">
        <div id="resumoPreparacao" class="resumo-bloco"></div>        
        <button id="btnFinalizarPreparacao" class="btn-icone" onclick="finalizarPreparacao()">Finalizar</button>
      </div>
    </div>
  
  <div class="grid-preparacao">
    <div id="colunaSeparados" class="skus-separados">
      <h3 class="titulo-coluna">ğŸ“¦ SKUs Separados</h3>
      <div id="listaSeparados" class="lista-cards-preparacao"></div>
        <div class="paginacao-coluna">
          <button id="btnSepAnt" onclick="paginaAnteriorSeparados()">â¬…ï¸</button>
          <span id="paginaSeparados">1 / 1</span>
          <button id="btnSepProx" onclick="proximaPaginaSeparados()">â¡ï¸</button>
      </div>
    </div>
    
    <div id="colunaPreparados" class="skus-preparados">
      <h3 class="titulo-coluna">SKUs Preparados</h3>
      <div id="listaPreparados" class="lista-cards-preparacao"></div>
      <div class="paginacao-coluna">
        <button id="btnPrepAnt" onclick="paginaAnteriorPreparados()">â¬…ï¸</button>
        <span id="paginaPreparados">1 / 1</span>
        <button id="btnPrepProx" onclick="proximaPaginaPreparados()">â¡ï¸</button>
      </div>
    </div>
    
    <div id="colunaBlisters" class="blisters">
      <h3 class="titulo-coluna">ğŸ“¦ Embalagem</h3>
      <button id="btnNovoBlister" onclick="abrirModalEmbalagem()">Adicionar</button>
      <select id="filtroEmbalagens" onchange="filtrarEmbalagens()" style="margin-top:6px; width:100%;">
        <option value="todas">Todas</option>
        <option value="aberto">Abertas</option>
        <option value="fechado">Fechadas</option>
      </select>
      <div id="listaEmbalagens"></div>
      <div class="paginacao-coluna">
        <button id="btnEmbAnterior" onclick="paginaAnteriorEmbalagens()">â¬…ï¸</button>
        <span id="paginaEmbalagens">1 / 1</span>
        <button id="btnEmbProximo" onclick="proximaPaginaEmbalagens()">â¡ï¸</button>
      </div>
    </div>
  </div>
  
  <!-- Modal para adicionar processadores -->
  <div id="modalCaixas" class="modal hidden">
    <div class="modal-content">
      <h3>Adicionar Processador</h3>
      <label>Quantas caixas deseja usar?</label>
      <input type="number" id="qtdCaixas" min="1" value="1">
      <div id="listaCaixasExistentes" style="margin-top: 10px;"></div>
      <button onclick="confirmarAdicaoProcessador()">Confirmar</button>
      <button onclick="fecharModalCaixas()" class="btn-cancel">Cancelar</button>
    </div>
  </div>

  <!-- Modal para Adicionar Embalagem-->
  <div id="modalEmbalagem" class="modal hidden">
    <div class="modal-content">
      <h3>Adicionar Embalagens</h3>
    
      <p>Selecione o tipo de embalagem:</p>
      <div class="tipo-buttons">
        <button onclick="selecionarTipoEmbalagem('blister')" id="btnBlister">Blister</button>
        <button onclick="selecionarTipoEmbalagem('caixa')" id="btnCaixa">Caixa</button>
      </div>

      <label for="qtdEmbalagem" style="margin-top:10px;">Quantidade:</label>
      <input type="number" id="qtdEmbalagem" min="1" value="1" />

      <div class="modal-buttons">
        <button onclick="confirmarNovaEmbalagem()">â• Criar</button>
        <button onclick="fecharModalEmbalagem()">Cancelar</button>
      </div>
    </div>
  </div>


  
  <!-- Modal para adicionar a blisters -->
  <div id="modalBlisters" class="modal hidden">
    <div class="modal-content">
      <h3>Adicionar a Blister</h3>
      <div id="listaBlistersDisponiveis"></div>
      <button onclick="fecharModalBlisters()" class="btn-cancel">Cancelar</button>
    </div>
  </div>
</div>

  <div id="telaPedido" class="hidden" style="display: none;">
    <div class="telaPedidoSKU">
      <div class="flex-row">
        <div style="margin-right: 20px">
          <label for="sku">SKU:</label>
          <input type="text" id="sku" placeholder="Ex: apenas nÃºmeros" />
        </div>
        <div>
          <label for="qtdItem">Qtd. de MemÃ³rias:</label>
          <input type="number" id="qtdItem" min="1" placeholder="Ex: 50" />
        </div>
        <button id="btnAdicionar" onclick="adicionarSKU()">
          <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" fill="currentColor" viewBox="0 0 24 24">
            <path d="M12 5v14m-7-7h14" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
          </svg>
        </button>
      </div>
      <div class="flex-row" style="margin-top: 10px">
        <input type="checkbox" id="dissipador" />
        <label for="dissipador">Com dissipador (22 por blister)</label>
      </div>
    </div>
    <div id="resumoPedido" class="resumo-bloco"></div>
    <div class="flex-row">
      <h2>ğŸ“¦ SKUs Selecionados</h2>
      <button id="btnFinalizar" onclick="enviarPedido()">ğŸ’¾ Enviar Pedido</button>
    </div>
    <div id="listaSkusSeparados" class="lista-cards" style="margin-top:15px;"></div>
  </div>

  <div id="telaHistorico" class="hidden">
    <h3>ğŸ“œ HistÃ³rico de Pedidos</h3>
    <div class="pesquisa-historico-container">
      <input type="text" id="pesquisaHistorico" placeholder="ğŸ” Pesquisar pedido..." oninput="carregarHistoricoPaginado()" />
    </div>
    <div id="historicoContainer"></div>
    <div id="paginacaoHistorico" class="paginacao-container"></div>
  </div>

  <div id="telaSKU">
    <div id="telaGerenciarSkus" class="hidden">
      <h3>ğŸ“¦ Lista de SKUs</h3>
      <div id="listaDeSkus" style="margin-bottom: 20px"></div>
    </div>
    <div id="telaSkus" class="hidden">
      <div id="adicionarNovoSku">
        <h3>Adicionar Novo SKU</h3>
        <div class="form-novo-sku">
          <input type="text" id="novoSkuCodigo" placeholder="PC----" />
          <select id="novoSkuHardware">
            <option value="MemÃ³ria RAM">MemÃ³ria RAM</option>
            <option value="Processador">Processador</option>
          </select>
          <input type="text" id="novoSkuModelo" placeholder="Modelo do item" />
          <button class="btnSalvarSKU" onclick="adicionarSkuPendente()">â•</button>
        </div>
        <div id="skusPendentes" class="skus-pendentes"><i>Nenhum SKU pendente para adicionar.</i></div>
      </div>
      <div class="flex-row">
        <h3>ğŸ“¦ Lista de SKUs</h3>
        <input type="text" id="pesquisaSku" placeholder="ğŸ” Pesquisar SKU ou modelo..." oninput="filtrarTabelaSkus()" />
        <button class="btnSalvarJSON" onclick="enviarSkusPendentes()">ğŸ’¾ Salvar SKUs</button>
      </div>
      <table id="tabelaSkus">
        <thead>
          <tr>
            <th>SKU</th>
            <th>Hardware</th>
            <th>Modelo</th>
            <th></th>
          </tr>
        </thead>
        <tbody id="listaTabelaSkus"></tbody>
      </table>
      <div class="paginacao">
        <button id="btnAnterior" onclick="paginaAnterior()">â—€ Anterior</button>
        <span id="paginaAtual">1 / 1</span>
        <button id="btnProximo" onclick="proximaPagina()">PrÃ³xima â–¶</button>
      </div>
    </div>
  </div>

  <script src="script.js"></script>

  <div id="avisoDinamico" class="aviso-dinamico hidden"></div>
  <div id="modalExcluir" class="modal hidden">
    <div class="modal-content">
      <p id="modalMensagem">Tem certeza que deseja excluir este SKU?</p>
      <div class="modal-buttons">
        <button id="btnConfirmarExcluir" class="btn-confirm">Sim, excluir</button>
        <button onclick="fecharModalExcluir()" class="btn-cancel">Cancelar</button>
      </div>
    </div>
  </div>
</body>

</html>